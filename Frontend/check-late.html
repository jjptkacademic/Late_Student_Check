<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1024, initial-scale=0.5, minimum-scale=0.3, maximum-scale=2.0, user-scalable=yes">
    <title>р╣Ар╕Кр╣Зр╕Др╕Кр╕╖р╣Ир╕нр╕бр╕▓р╕кр╕▓р╕в - р╕гр╕░р╕Ър╕Ър╣Ар╕Кр╣Зр╕Др╕Щр╕▒р╕Бр╣Ар╕гр╕╡р╕вр╕Щр╕бр╕▓р╕кр╕▓р╕в</title>
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/check-late.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <button id="backBtn" class="btn btn-icon">тмЕя╕П</button>
                    <button id="homeBtn" class="btn btn-icon">ЁЯПа</button>
                    <h1>р╣Ар╕Кр╣Зр╕Др╕Кр╕╖р╣Ир╕нр╕бр╕▓р╕кр╕▓р╕в</h1>
                </div>
                <div class="header-right">
                    <button id="viewStatsBtn" class="btn btn-secondary">ЁЯУК р╕Фр╕╣р╕кр╕Цр╕┤р╕Хр╕┤р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф</button>
                    <label for="classSelect">р╕лр╣Йр╕нр╕З:</label>
                    <select id="classSelect" class="class-selector">
                        <!-- Options loaded dynamically -->
                    </select>
                </div>
            </div>
        </header>

        <div class="date-time-bar">
            <span>ЁЯУЕ р╕зр╕▒р╕Щр╕Чр╕╡р╣И: <strong id="currentDate"></strong></span>
            <span>тП░ р╣Ар╕зр╕ер╕▓: <strong id="currentTime"></strong></span>
        </div>

        <main class="main-content">
            <section class="today-records-section" id="todayRecordsSection" style="display: none;">
                <h2>тЬЕ р╕Щр╕▒р╕Бр╣Ар╕гр╕╡р╕вр╕Щр╕Чр╕╡р╣Ир╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕бр╕▓р╕кр╕▓р╕вр╕зр╕▒р╕Щр╕Щр╕╡р╣Й (<span id="todayCount">0</span> р╕Др╕Щ)</h2>
                <div id="todayRecordsList" class="today-records-list">
                    <!-- Today's records loaded here -->
                </div>
            </section>

            <section class="check-late-section">
                <h2>ЁЯУЭ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Бр╕▓р╕гр╕бр╕▓р╕кр╕▓р╕в (р╣Ар╕ер╕╖р╕нр╕Бр╣Др╕Фр╣Йр╕лр╕ер╕▓р╕вр╕Др╕Щ)</h2>
                
                <div class="search-bar">
                    <input 
                        type="text" 
                        id="searchInput" 
                        placeholder="ЁЯФН р╕Др╣Йр╕Щр╕лр╕▓р╕Щр╕▒р╕Бр╣Ар╕гр╕╡р╕вр╕Щ (р╕гр╕лр╕▒р╕к, р╕Кр╕╖р╣Ир╕н, р╕Щр╕▓р╕бр╕кр╕Бр╕╕р╕е)..."
                        class="search-input"
                    >
                </div>

                <div id="loadingSpinner" class="loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>р╕Бр╕│р╕ер╕▒р╕Зр╣Вр╕лр╕ер╕Фр╕Вр╣Йр╕нр╕бр╕╣р╕е...</p>
                </div>

                <div id="studentsList" class="students-table-container">
                    <table class="students-table">
                        <thead>
                            <tr>
                                <th>р╕ер╕│р╕Фр╕▒р╕Ъ</th>
                                <th>р╕гр╕лр╕▒р╕к</th>
                                <th>р╕Кр╕╖р╣Ир╕н - р╕Щр╕▓р╕бр╕кр╕Бр╕╕р╕е</th>
                                <th style="text-align: center;">р╕бр╕▓р╕кр╕▓р╕в</th>
                                <th>р╕кр╕▓р╣Ар╕лр╕Хр╕╕</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTableBody">
                            <!-- Students rows loaded here -->
                        </tbody>
                    </table>
                </div>

                <div class="selection-info" id="selectionInfo" style="display: none;">
                    <p>ЁЯУМ р╣Ар╕ер╕╖р╕нр╕Бр╣Бр╕ер╣Йр╕з: <strong id="selectedCount">0</strong> р╕Др╕Щ</p>
                </div>

                <div class="form-actions">
                    <button id="saveBtn" class="btn btn-primary btn-large">ЁЯТ╛ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф</button>
                    <button id="clearBtn" class="btn btn-outline btn-large">ЁЯЧСя╕П р╕ер╣Йр╕▓р╕Зр╕Бр╕▓р╕гр╣Ар╕ер╕╖р╕нр╕Б</button>
                </div>
            </section>
        </main>
    </div>

    <div id="detailModal" class="modal" style="display: none;">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Бр╕▓р╕гр╕бр╕▓р╕кр╕▓р╕в</h3>
                <button class="modal-close" id="closeDetailModal">тЬЦя╕П</button>
            </div>
            <div class="modal-body">
                <div class="student-info">
                    <p><strong>ЁЯСд р╕Щр╕▒р╕Бр╣Ар╕гр╕╡р╕вр╕Щ:</strong> <span id="detailName"></span></p>
                    <p><strong>ЁЯПл р╕лр╣Йр╕нр╕З:</strong> <span id="detailClass"></span></p>
                    <p><strong>ЁЯФв р╕гр╕лр╕▒р╕к:</strong> <span id="detailCode"></span></p>
                    <p><strong>ЁЯУК р╕бр╕▓р╕кр╕▓р╕вр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф:</strong> <span id="detailTotal"></span> р╕Др╕гр╕▒р╣Йр╕З</p>
                </div>
                <h4>ЁЯУЕ р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕бр╕▓р╕кр╕▓р╕в:</h4>
                <div id="detailHistory" class="history-table-container">
                    <!-- History table loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="closeDetailBtn" class="btn btn-primary">р╕Ыр╕┤р╕Ф</button>
            </div>
        </div>
    </div>

    <!-- Late time modal -->
    <div id="lateFormModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>р╕Бр╕│р╕лр╕Щр╕Фр╣Ар╕зр╕ер╕▓</h3>
                <button class="modal-close" onclick="hideLateFormModal()">тЬЦя╕П</button>
            </div>
            <div class="modal-body" style="text-align: center;">
                <label for="lateTime" style="display: block; margin-bottom: var(--space-sm);">тП░ р╣Ар╕зр╕ер╕▓р╕бр╕▓р╕кр╕▓р╕в</label>
                <input type="time" id="lateTime" style="padding: var(--space-sm); width: 200px; text-align: center;">
            </div>
            <div class="modal-footer" style="display: flex; gap: var(--space-sm); justify-content: center;">
                <button class="btn btn-outline" onclick="hideLateFormModal()">р╕вр╕Бр╣Ар╕ер╕┤р╕Б</button>
                <button class="btn btn-primary" onclick="confirmSave()">р╕Ър╕▒р╕Щр╕Чр╕╢р╕Б</button>
            </div>
        </div>
    </div>

    <script src="js/performance-monitor.js"></script>
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/api-helper.js"></script>
    <script src="js/components.js"></script>
    <script src="js/stats.js"></script>
    <script src="js/check-late.js"></script>
</body>
</html>
